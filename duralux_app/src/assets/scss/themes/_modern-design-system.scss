// Modern Design System
// Based on Finance Tracking Dashboard from Figma

// ==============================================
// COLOR PALETTE
// ==============================================

// Primary Accent - Neon Lime
$accent-primary: #bbff00;
$accent-primary-dark: #99d600;
$accent-primary-light: #d6ff65;
$accent-primary-subtle: #f4ffd4;

// Dark Colors
$dark-primary: #343330;
$dark-secondary: #2c2d32;
$dark-text: #343330;

// Neutral Colors
$neutral-50: #fafafa;
$neutral-100: #f2f2f2;
$neutral-150: #f0f1f5;
$neutral-200: #e9e9e9;
$neutral-300: #d9d9d9;
$neutral-400: #b2b2b2;
$neutral-500: #969696;
$neutral-600: #636363;
$neutral-700: #4b4b4b;
$neutral-800: #343330;
$neutral-900: #1a1a1a;

// Status Colors
$status-success: #19cf56;
$status-success-bg: #c5f4d4;
$status-warning: #f59e0b;
$status-warning-bg: rgba(245, 158, 11, 0.1);
$status-danger: #fd4a4a;
$status-danger-bg: #ffdbdb;
$status-info: #3b82f6;
$status-info-bg: rgba(59, 130, 246, 0.1);

// ==============================================
// SHADOWS
// ==============================================

$shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
$shadow-sm:
  0 1px 3px 0 rgba(0, 0, 0, 0.05),
  0 1px 2px -1px rgba(0, 0, 0, 0.05);
$shadow-md:
  0 4px 6px -1px rgba(0, 0, 0, 0.05),
  0 2px 4px -2px rgba(0, 0, 0, 0.05);
$shadow-lg:
  0 10px 15px -3px rgba(0, 0, 0, 0.05),
  0 4px 6px -4px rgba(0, 0, 0, 0.05);
$shadow-xl:
  0 20px 25px -5px rgba(0, 0, 0, 0.05),
  0 8px 10px -6px rgba(0, 0, 0, 0.05);
$shadow-card:
  0 1px 4px rgba(12, 12, 13, 0.1),
  0 1px 4px rgba(12, 12, 13, 0.05);
$shadow-card-hover: 0 8px 24px rgba(0, 0, 0, 0.08);

// ==============================================
// BORDER RADIUS
// ==============================================

$radius-xs: 6px;
$radius-sm: 8px;
$radius-md: 12px;
$radius-lg: 16px;
$radius-xl: 20px;
$radius-2xl: 24px;
$radius-full: 360px;

// ==============================================
// TYPOGRAPHY
// ==============================================

$font-family-base:
  "Plus Jakarta Sans",
  -apple-system,
  BlinkMacSystemFont,
  "Segoe UI",
  Roboto,
  sans-serif;
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

// ==============================================
// TRANSITIONS
// ==============================================

$transition-fast: 150ms ease;
$transition-base: 200ms ease;
$transition-slow: 300ms ease;

// ==============================================
// GLOBAL OVERRIDES
// ==============================================

@import url("https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap");

:root {
  --accent-primary: #{$accent-primary};
  --accent-primary-dark: #{$accent-primary-dark};
  --accent-primary-light: #{$accent-primary-light};
  --accent-primary-subtle: #{$accent-primary-subtle};
  --dark-primary: #{$dark-primary};
  --shadow-card: #{$shadow-card};
  --shadow-card-hover: #{$shadow-card-hover};
  --radius-md: #{$radius-md};
  --radius-lg: #{$radius-lg};
  --radius-2xl: #{$radius-2xl};
  --radius-full: #{$radius-full};

  // Theme-aware design tokens - Light Mode (Pure White)
  --ds-bg-primary: #ffffff;
  --ds-bg-secondary: #ffffff;
  --ds-bg-tertiary: #ffffff;
  --ds-bg-card: #ffffff;
  --ds-bg-elevated: #ffffff;
  --ds-bg-highlight: #{$accent-primary-subtle};
  --ds-text-primary: #{$dark-text};
  --ds-text-secondary: #{$neutral-600};
  --ds-text-tertiary: #{$neutral-500};
  --ds-text-muted: #{$neutral-400};
  --ds-border-primary: #{$neutral-200};
  --ds-border-secondary: #bfbfbf;
  --ds-divider: #{$neutral-200};
  --ds-chart-text: #{$dark-text};
  --ds-chart-grid: #{$neutral-200};
  --ds-chart-stroke: #{$neutral-100};
  --ds-chart-bar-dark: #{$dark-primary};
  --ds-chart-bar-muted: #{$neutral-400};
  --ds-icon-default: #{$dark-text};
  --ds-icon-muted: #{$neutral-600};
  --ds-hover-bg: rgba(0, 0, 0, 0.02);
  --ds-scrollbar-track: #{$neutral-100};
  --ds-scrollbar-thumb: #{$neutral-300};
  --ds-tooltip-bg: #ffffff;
  --ds-tooltip-border: #{$neutral-300};
  --ds-tooltip-text: #{$dark-text};
}

html.app-skin-dark {
  --ds-bg-primary: #0f172a;
  --ds-bg-secondary: #1c2538;
  --ds-bg-tertiary: #1e293b;
  --ds-bg-card: #1a2236;
  --ds-bg-elevated: #1e293b;
  --ds-bg-highlight: rgba(187, 255, 0, 0.08);
  --ds-text-primary: #e2e8f0;
  --ds-text-secondary: #94a3b8;
  --ds-text-tertiary: #64748b;
  --ds-text-muted: #475569;
  --ds-border-primary: #1e3048;
  --ds-border-secondary: #2d3f58;
  --ds-divider: #1e3048;
  --ds-chart-text: #94a3b8;
  --ds-chart-grid: #1e3048;
  --ds-chart-stroke: #1a2236;
  --ds-chart-bar-dark: #94a3b8;
  --ds-chart-bar-muted: #475569;
  --ds-icon-default: #e2e8f0;
  --ds-icon-muted: #94a3b8;
  --ds-hover-bg: rgba(255, 255, 255, 0.03);
  --ds-scrollbar-track: #1e293b;
  --ds-scrollbar-thumb: #334155;
  --ds-tooltip-bg: #1e293b;
  --ds-tooltip-border: #334155;
  --ds-tooltip-text: #e2e8f0;
}

body {
  font-family: $font-family-base;
  color: var(--ds-text-primary);
}

// Modern Card Base
.card {
  background: var(--ds-bg-card);
  border: 1px solid var(--ds-border-primary);
  border-radius: $radius-2xl !important;
  box-shadow: none;
  transition:
    box-shadow $transition-base,
    transform $transition-base;
  overflow: hidden;

  &:hover {
    box-shadow: $shadow-card-hover;
  }

  .card-header {
    background: transparent;
    border-bottom: 1px solid var(--ds-border-primary);
    padding: 20px 24px;

    .card-title {
      font-weight: $font-weight-semibold;
      font-size: 20px;
      color: var(--ds-text-primary);
      margin: 0;
    }
  }

  .card-body {
    padding: 24px;
  }

  .card-footer {
    background: transparent;
    border-top: 1px solid var(--ds-border-primary);
    padding: 16px 24px;
  }
}

// White Card Variant
.card-white {
  background: #ffffff !important;
}

// Modern Buttons
.btn {
  border-radius: $radius-full;
  font-weight: $font-weight-medium;
  padding: 10px 20px;
  transition: all $transition-base;
  border: none;
  font-family: $font-family-base;

  &.btn-primary {
    background: $accent-primary;
    color: $dark-text;

    &:hover,
    &:focus {
      background: $accent-primary-dark;
      color: $dark-text;
      transform: translateY(-1px);
    }
  }

  &.btn-outline-primary {
    border: 1px solid rgba(0, 0, 0, 0.2);
    background: transparent;
    color: $dark-text;

    &:hover,
    &:focus {
      border-color: $accent-primary;
      background: $accent-primary-subtle;
      color: $dark-text;
    }
  }

  &.btn-secondary {
    background: $neutral-150;
    color: $dark-text;

    &:hover,
    &:focus {
      background: $neutral-200;
    }
  }

  &.btn-dark {
    background: $dark-secondary;
    color: #ffffff;

    &:hover,
    &:focus {
      background: $dark-primary;
    }
  }

  &.btn-white {
    background: #ffffff;
    color: $dark-text;

    &:hover,
    &:focus {
      background: $neutral-100;
    }
  }

  &.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
  }

  &.btn-lg {
    padding: 12px 24px;
    font-size: 16px;
  }
}

// Icon Button (Round)
.btn-icon {
  width: 48px;
  height: 48px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: $radius-full;
  background: $neutral-150;
  border: none;

  &:hover {
    background: $neutral-200;
  }

  &.btn-icon-sm {
    width: 32px;
    height: 32px;
  }

  &.btn-icon-lg {
    width: 56px;
    height: 56px;
  }
}

// Modern Badges (Pill Shape)
.badge {
  font-weight: $font-weight-normal;
  padding: 4px 12px;
  border-radius: $radius-full;
  font-size: 12px;
  font-family: $font-family-base;

  &.bg-primary,
  &.badge-primary {
    background: $accent-primary !important;
    color: #000329;
  }

  &.bg-success,
  &.badge-success,
  &.bg-soft-success {
    background: $status-success-bg !important;
    color: $status-success;
  }

  &.bg-danger,
  &.badge-danger,
  &.bg-soft-danger {
    background: $status-danger-bg !important;
    color: $status-danger;
  }

  &.bg-info,
  &.badge-info,
  &.bg-soft-info {
    background: $status-info-bg !important;
    color: $status-info;
  }

  &.bg-soft-primary {
    background: $accent-primary-subtle !important;
    color: $dark-text;
  }
}

// Status Tags (from Figma)
.status-tag {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: $radius-full;
  font-size: 12px;
  font-family: $font-family-base;

  &.status-pending {
    background: $status-danger-bg;
    color: $status-danger;
  }

  &.status-done,
  &.status-success {
    background: $status-success-bg;
    color: $status-success;
  }
}

// Modern Form Controls
.form-control,
.form-select {
  border-radius: $radius-full;
  border: 1px solid var(--ds-border-primary);
  padding: 8px 12px;
  font-size: 12px;
  font-family: $font-family-base;
  transition:
    border-color $transition-base,
    box-shadow $transition-base;
  background: transparent;
  color: var(--ds-text-primary);

  &:focus {
    border-color: $accent-primary;
    box-shadow: 0 0 0 3px rgba(187, 255, 0, 0.2);
    outline: none;
  }

  &::placeholder {
    color: var(--ds-text-tertiary);
  }
}

// Search Input with Icon Background
.search-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: $radius-full;
  background: transparent;

  .search-icon-bg {
    width: 48px;
    height: 48px;
    background: $neutral-150;
    border-radius: $radius-full;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  input {
    border: none;
    background: transparent;
    outline: none;
    font-size: 12px;
    color: $dark-text;
    flex: 1;

    &::placeholder {
      color: $neutral-500;
    }
  }
}

// Modern Tables
.table {
  border-radius: $radius-md;
  overflow: hidden;
  font-family: $font-family-base;

  thead {
    background: transparent;

    th {
      font-weight: $font-weight-normal;
      font-size: 12px;
      text-transform: uppercase;
      color: var(--ds-text-primary);
      opacity: 0.7;
      padding: 16px;
      border-bottom: none;
    }
  }

  tbody {
    tr {
      transition: background $transition-fast;

      &:hover {
        background: var(--ds-hover-bg);
      }

      td {
        padding: 16px;
        vertical-align: middle;
        border-bottom: none;
        font-size: 12px;
        color: var(--ds-text-primary);
      }
    }
  }
}

// Progress Bars
.progress {
  height: 19px;
  border-radius: $radius-full;
  background: $neutral-300;
  overflow: visible;

  .progress-bar {
    background: $accent-primary;
    border-radius: $radius-full;
    transition: width $transition-slow;
  }
}

// KPI Card (Finance Style)
.kpi-card-modern {
  background: var(--ds-bg-secondary);
  border: 1px solid var(--ds-border-primary);
  border-radius: $radius-2xl;
  padding: 24px;

  .kpi-icon {
    width: 32px;
    height: 32px;
    border-radius: $radius-xs;
    background: $accent-primary;
    display: flex;
    align-items: center;
    justify-content: center;
    color: $dark-text;
  }

  .kpi-label {
    font-size: 16px;
    color: var(--ds-text-secondary);
    font-weight: $font-weight-normal;
  }

  .kpi-value {
    font-size: 32px;
    font-weight: $font-weight-semibold;
    color: var(--ds-text-primary);
    line-height: 1.5;
  }
}

// Feature Card (Dark Style)
.feature-card-dark {
  background: $dark-primary;
  border: 1px solid $neutral-400;
  border-radius: $radius-2xl;
  padding: 16px;
  color: #ffffff;

  .feature-title {
    font-size: 20px;
    font-weight: $font-weight-bold;
    text-transform: capitalize;
  }

  .feature-subtitle {
    font-size: 16px;
    font-weight: $font-weight-normal;
  }

  .feature-btn {
    width: 100%;
    padding: 12px 16px;
    background: #ffffff;
    color: $dark-text;
    border-radius: $radius-full;
    font-weight: $font-weight-semibold;
    text-align: center;
    border: none;
  }
}

// Highlight Card (Light Green)
.highlight-card {
  background: $accent-primary-subtle;
  border: 1px solid $neutral-200;
  border-radius: $radius-2xl;
  padding: 24px;

  .highlight-dots {
    display: flex;
    gap: 4px;
    margin-bottom: 16px;

    span {
      width: 8px;
      height: 8px;
      background: #000000;
      border-radius: 50%;
    }
  }

  .highlight-title {
    font-size: 28px;
    font-weight: $font-weight-semibold;
    line-height: 36px;
    color: $dark-text;
    text-transform: capitalize;
  }
}

// Trend Badge
.trend-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 12px;
  background: $accent-primary;
  border-radius: $radius-full;
  font-size: 12px;
  color: #000329;
  text-transform: capitalize;
}

// Chart Card
.chart-card {
  background: var(--ds-bg-secondary);
  border: 1px solid var(--ds-border-primary);
  border-radius: $radius-2xl;
  overflow: hidden;

  .chart-header {
    padding: 15px 23px;

    .chart-title {
      font-size: 20px;
      font-weight: $font-weight-semibold;
      color: var(--ds-text-primary);
      text-transform: capitalize;
    }

    .chart-subtitle {
      font-size: 12px;
      color: var(--ds-text-secondary);
    }
  }

  .chart-body {
    padding: 0 23px 23px;
  }
}

// Dropdown Filter Button
.filter-dropdown {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 12px;
  background: $accent-primary;
  border-radius: $radius-full;
  font-size: 14px;
  color: #000329;
  border: none;
  cursor: pointer;

  &:hover {
    background: $accent-primary-dark;
  }
}

// Date Range Picker Style
.date-range-picker {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: $neutral-150;
  border-radius: $radius-full;

  .date-icon-bg {
    padding: 8px;
    background: #ffffff;
    border-radius: $radius-full;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .date-text {
    font-size: 12px;
    color: $dark-text;
  }
}

// Weekly Toggle
.period-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: $dark-secondary;
  border-radius: $radius-full;
  color: #ffffff;
  font-size: 12px;

  .toggle-icon-bg {
    padding: 8px;
    background: #ffffff;
    border-radius: $radius-full;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

// User Pill
.user-pill {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 20px 4px 8px;
  border: 1px solid #d6d6d6;
  border-radius: $radius-full;

  img {
    width: 32px;
    height: 32px;
    border-radius: 50%;
  }

  span {
    font-size: 16px;
    font-weight: $font-weight-medium;
    color: $dark-text;
  }
}

// Legend Item
.legend-item {
  display: flex;
  align-items: center;
  gap: 12px;

  .legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }

  .legend-text {
    font-size: 12px;
    color: $dark-text;
    opacity: 0.6;
    text-transform: capitalize;
  }
}

// Page Background
.main-content {
  background: var(--ds-bg-primary);
}

// Modal Overrides
.modal-content {
  border-radius: $radius-2xl;
  border: none;
  box-shadow: $shadow-xl;
  background: var(--ds-bg-card);
  color: var(--ds-text-primary);

  .modal-header {
    padding: 24px 28px 16px;
    border-bottom: 1px solid var(--ds-border-primary);

    .modal-title {
      font-weight: $font-weight-semibold;
      font-size: 18px;
      color: var(--ds-text-primary);
    }
  }

  .modal-body {
    padding: 24px 28px;

    .form-label {
      color: var(--ds-text-secondary);
    }
  }

  .modal-footer {
    padding: 16px 28px 24px;
    border-top: 1px solid var(--ds-border-primary);
  }
}

// Dropdown Overrides
.dropdown-menu {
  border-radius: $radius-md;
  border: 1px solid var(--ds-border-primary);
  box-shadow: $shadow-lg;
  padding: 8px;
  background: var(--ds-bg-elevated);

  .dropdown-item {
    border-radius: $radius-sm;
    padding: 10px 14px;
    font-size: 14px;
    transition: background $transition-fast;
    color: var(--ds-text-primary);

    &:hover {
      background: var(--ds-hover-bg);
    }

    &.active {
      background: $accent-primary;
      color: $dark-text;
    }
  }
}

// Scrollbar Styling
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: var(--ds-scrollbar-track);
  border-radius: $radius-full;
}

::-webkit-scrollbar-thumb {
  background: var(--ds-scrollbar-thumb);
  border-radius: $radius-full;

  &:hover {
    background: var(--ds-text-muted);
  }
}

// Typography Utilities
.text-accent {
  color: $accent-primary !important;
}

.bg-accent {
  background: $accent-primary !important;
}

.bg-accent-subtle {
  background: $accent-primary-subtle !important;
}

.text-dark-primary {
  color: $dark-text !important;
}

.text-muted-custom {
  color: $neutral-500 !important;
}

// ==============================================
// SIDEBAR - MODERN CRM NAVIGATION
// ==============================================
// Inspired by HubSpot, Intercom, Monday.com
// Flat nav, no accordions, compact spacing, clear hierarchy

// Override old nxl-item active states (neutralize legacy styles)
.nxl-navigation {
  .navbar-content {
    .nxl-navbar > .nxl-item,
    .nxl-item {
      &.active > .nxl-link,
      &:hover > .nxl-link {
        background: transparent !important;
        color: inherit !important;
      }
    }

    // Hide old caption labels (we use sidebar-divider now)
    .nxl-caption {
      display: none !important;
    }
  }
}

// Sidebar Nav Container
.sidebar-nav {
  padding: 8px 0 !important;
  list-style: none;
  margin: 0;
}

// Section Dividers (thin line + small uppercase label)
.sidebar-divider {
  list-style: none;
  padding: 16px 20px 6px;

  .sidebar-divider__label {
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--ds-text-muted);
  }

  &--collapsed {
    padding: 8px 20px;

    .sidebar-divider__line {
      display: block;
      height: 1px;
      background: var(--ds-border-primary);
    }
  }
}

// Parent Menu Items
.sidebar-item {
  list-style: none;
  margin: 1px 10px;
  border-radius: $radius-sm;
  position: relative;
  transition: background $transition-fast;

  .sidebar-link {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    text-decoration: none;
    color: var(--ds-text-secondary);
    font-size: 13px;
    font-weight: 500;
    border-radius: $radius-sm;
    transition: all $transition-fast;
    gap: 10px;

    &:hover {
      text-decoration: none;
      color: var(--ds-text-primary);
    }
  }

  .sidebar-link__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    flex-shrink: 0;

    svg {
      width: 18px;
      height: 18px;
      stroke-width: 1.8px;
    }
  }

  .sidebar-link__text {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  // Hover state
  &--hover,
  &:hover {
    .sidebar-link {
      background: var(--ds-hover-bg);
      color: var(--ds-text-primary);
    }
  }

  // Active parent state - lime left accent bar
  &--active {
    .sidebar-link {
      background: rgba(187, 255, 0, 0.12);
      color: var(--ds-text-primary);
      font-weight: 600;
      position: relative;

      &::before {
        content: "";
        position: absolute;
        left: 0;
        top: 4px;
        bottom: 4px;
        width: 3px;
        border-radius: 0 3px 3px 0;
        background: $accent-primary;
      }
    }

    .sidebar-link__icon svg {
      color: var(--ds-text-primary);
    }
  }

  // Tooltip for collapsed state
  .sidebar-tooltip {
    display: none;
    position: absolute;
    left: calc(100% + 12px);
    top: 50%;
    transform: translateY(-50%);
    background: $dark-primary;
    color: #fff;
    padding: 6px 12px;
    border-radius: $radius-sm;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    z-index: 1050;
    pointer-events: none;
    box-shadow: $shadow-md;

    &::before {
      content: "";
      position: absolute;
      right: 100%;
      top: 50%;
      transform: translateY(-50%);
      border: 5px solid transparent;
      border-right-color: $dark-primary;
    }
  }

  &:hover .sidebar-tooltip {
    display: block;
  }
}

// Sub-items (flat, shown inline under active parent)
.sidebar-subitem {
  list-style: none;
  margin: 0 10px;

  .sidebar-sublink {
    display: flex;
    align-items: center;
    padding: 6px 12px 6px 42px;
    text-decoration: none;
    color: var(--ds-text-tertiary);
    font-size: 13px;
    font-weight: 400;
    border-radius: $radius-sm;
    transition: all $transition-fast;
    gap: 8px;

    &:hover {
      text-decoration: none;
      color: var(--ds-text-primary);
      background: var(--ds-hover-bg);
    }
  }

  .sidebar-sublink__dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--ds-text-muted);
    flex-shrink: 0;
    transition: background $transition-fast;
  }

  .sidebar-sublink__text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  // Active sub-item
  &--active {
    .sidebar-sublink {
      color: var(--ds-text-primary);
      font-weight: 500;
    }

    .sidebar-sublink__dot {
      background: $accent-primary;
      box-shadow: 0 0 0 2px rgba(187, 255, 0, 0.3);
    }
  }
}

// Badge Pills
.sidebar-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 7px;
  border-radius: $radius-full;
  line-height: 1.4;
  flex-shrink: 0;

  &--primary {
    background: $accent-primary;
    color: $dark-text;
  }

  &--warning {
    background: $status-warning-bg;
    color: darken($status-warning, 10%);
  }

  &--danger {
    background: $status-danger-bg;
    color: $status-danger;
  }
}

// Sidebar Collapse Button
.sidebar-collapse-btn {
  width: 24px;
  height: 24px;
  border-radius: $radius-full;
  border: 1px solid var(--ds-border-primary);
  background: var(--ds-bg-card);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all $transition-base;
  position: absolute;
  right: -12px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;

  &:hover {
    background: var(--ds-bg-secondary);
    border-color: var(--ds-border-secondary);
  }
}

// Quick Actions at Bottom
.sidebar-quick-actions {
  padding: 12px;
  border-top: 1px solid var(--ds-border-primary);
  border-right: 1px solid var(--ds-border-primary);
  background: var(--ds-bg-card);

  .quick-action-btn {
    width: 100%;
    padding: 9px 16px;
    background: $accent-primary;
    color: $dark-text;
    border: none;
    border-radius: $radius-full;
    font-size: 13px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: all $transition-base;

    &:hover {
      background: $accent-primary-dark;
    }
  }
}

// Collapsed sidebar adjustments (uses html.minimenu for layout compat with legacy SCSS)
html.minimenu {
  .nxl-navigation {
    .sidebar-nav {
      padding: 8px 0 !important;
    }

    .sidebar-item {
      margin: 1px 8px;

      .sidebar-link {
        justify-content: center;
        padding: 10px;
      }

      .sidebar-link__text,
      .sidebar-badge {
        display: none;
      }

      .sidebar-tooltip {
        // Show on hover in collapsed mode
        display: none;
      }

      &--active .sidebar-link::before {
        top: 6px;
        bottom: 6px;
      }
    }

    .sidebar-subitem {
      display: none;
    }

    .sidebar-divider {
      display: none;

      &--collapsed {
        display: list-item;
      }
    }

    .sidebar-quick-actions .quick-action-btn {
      padding: 10px;
      min-width: auto;

      span {
        display: none;
      }
    }
  }

  // When hovering collapsed sidebar, show full nav (legacy behavior preserved)
  .nxl-navigation:hover {
    .sidebar-item {
      margin: 1px 10px;

      .sidebar-link {
        justify-content: flex-start;
        padding: 8px 12px;
        gap: 10px;
      }

      .sidebar-link__text,
      .sidebar-badge {
        display: inline;
      }

      .sidebar-tooltip {
        display: none !important;
      }
    }

    .sidebar-subitem {
      display: list-item;
    }

    .sidebar-divider {
      display: list-item;

      &--collapsed {
        display: none;
      }
    }

    .sidebar-quick-actions .quick-action-btn {
      padding: 9px 16px;

      span {
        display: inline;
      }
    }
  }
}

// ==============================================
// DARK MODE - COMPREHENSIVE OVERRIDES
// ==============================================

html.app-skin-dark {
  // Body & page background
  body {
    background-color: var(--ds-bg-primary) !important;
    color: var(--ds-text-primary) !important;
  }

  // Page header
  .page-header {
    background-color: var(--ds-bg-primary) !important;
    border-bottom-color: var(--ds-border-primary) !important;

    h2,
    h3,
    h4,
    h5 {
      color: var(--ds-text-primary) !important;
    }

    .breadcrumb-item {
      color: var(--ds-text-tertiary);

      a {
        color: var(--ds-text-secondary) !important;
      }

      &.active {
        color: var(--ds-text-tertiary) !important;
      }
    }
  }

  // Header bar
  .nxl-header {
    background-color: var(--ds-bg-card) !important;
    border-bottom-color: var(--ds-border-primary) !important;

    .nxl-head-link {
      color: var(--ds-text-secondary) !important;

      &:hover {
        color: var(--ds-text-primary) !important;
      }
    }
  }

  // Sidebar navigation
  .nxl-navigation {
    background: var(--ds-bg-card) !important;
    border-right-color: var(--ds-border-primary) !important;
  }

  .m-header {
    border-bottom-color: var(--ds-border-primary) !important;
  }

  // Cards
  .card {
    background: var(--ds-bg-card) !important;
    border-color: var(--ds-border-primary) !important;

    .card-header {
      border-bottom-color: var(--ds-border-primary) !important;

      .card-title {
        color: var(--ds-text-primary) !important;
      }
    }

    .card-footer {
      border-top-color: var(--ds-border-primary) !important;
    }
  }

  // Tables
  .table {
    color: var(--ds-text-primary) !important;

    thead th {
      color: var(--ds-text-secondary) !important;
      border-bottom-color: var(--ds-border-primary) !important;
    }

    tbody {
      tr {
        &:hover {
          background: var(--ds-hover-bg) !important;
        }

        td {
          color: var(--ds-text-primary) !important;
          border-bottom-color: var(--ds-border-primary) !important;
        }
      }
    }
  }

  // Forms
  .form-control,
  .form-select {
    background-color: var(--ds-bg-tertiary) !important;
    border-color: var(--ds-border-secondary) !important;
    color: var(--ds-text-primary) !important;

    &::placeholder {
      color: var(--ds-text-muted) !important;
    }

    &:focus {
      border-color: $accent-primary !important;
      box-shadow: 0 0 0 3px rgba(187, 255, 0, 0.15) !important;
    }
  }

  .form-label {
    color: var(--ds-text-secondary) !important;
  }

  // Modals
  .modal-content {
    background-color: var(--ds-bg-card) !important;
    border-color: var(--ds-border-primary) !important;

    .modal-header {
      border-bottom-color: var(--ds-border-primary) !important;

      .modal-title {
        color: var(--ds-text-primary) !important;
      }

      .btn-close {
        filter: invert(1) grayscale(100%) brightness(200%);
      }
    }

    .modal-footer {
      border-top-color: var(--ds-border-primary) !important;
    }
  }

  // Dropdowns
  .dropdown-menu {
    background-color: var(--ds-bg-elevated) !important;
    border-color: var(--ds-border-primary) !important;

    .dropdown-item {
      color: var(--ds-text-primary) !important;

      &:hover,
      &:focus {
        background: var(--ds-hover-bg) !important;
      }
    }
  }

  // Buttons
  .btn-secondary {
    background: var(--ds-bg-tertiary) !important;
    color: var(--ds-text-primary) !important;
    border-color: var(--ds-border-secondary) !important;
  }

  .btn-outline-secondary {
    border-color: var(--ds-border-secondary) !important;
    color: var(--ds-text-secondary) !important;

    &:hover {
      background: var(--ds-bg-tertiary) !important;
      color: var(--ds-text-primary) !important;
    }
  }

  .btn-outline-danger {
    border-color: rgba(253, 74, 74, 0.4) !important;
    color: #fd4a4a !important;

    &:hover {
      background: rgba(253, 74, 74, 0.15) !important;
    }
  }

  // Footer
  .footer {
    background-color: var(--ds-bg-primary) !important;
    border-top-color: var(--ds-border-primary) !important;
    color: var(--ds-text-tertiary) !important;
  }

  // Main content area
  .main-content {
    background: var(--ds-bg-primary) !important;
  }

  // Badges remain their own colors (they're semantic)
  // but text-dark needs override
  .text-dark {
    color: var(--ds-text-primary) !important;
  }

  .text-muted {
    color: var(--ds-text-tertiary) !important;
  }

  // Border utilities
  .border-bottom {
    border-bottom-color: var(--ds-border-primary) !important;
  }

  .border-top {
    border-top-color: var(--ds-border-primary) !important;
  }

  // Typography overrides
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  .h1,
  .h2,
  .h3,
  .h4,
  .h5,
  .h6 {
    color: var(--ds-text-primary);
  }

  // Quick actions in sidebar
  .sidebar-quick-actions {
    background: var(--ds-bg-card) !important;
    border-top-color: var(--ds-border-primary) !important;
    border-right-color: var(--ds-border-primary) !important;
  }

  // Theme customizer panel
  .customizer-sidebar-wrapper {
    background: var(--ds-bg-card) !important;

    .customizer-sidebar-header {
      border-bottom-color: var(--ds-border-primary) !important;
    }

    .customizer-sidebar-footer {
      border-top-color: var(--ds-border-primary) !important;
    }

    .theme-options-set {
      border-color: var(--ds-border-primary) !important;
    }

    .options-label {
      background: var(--ds-bg-card) !important;
      border-color: var(--ds-border-primary) !important;
      color: var(--ds-text-secondary) !important;
    }
  }

  // Spinner
  .spinner-border {
    color: $accent-primary !important;
  }

  // Link colors
  a:not(.btn):not(.nav-link):not(.sidebar-link):not(.sidebar-sublink):not(
      .dropdown-item
    ) {
    color: var(--ds-text-secondary);

    &:hover {
      color: $accent-primary;
    }
  }

  // Search inputs with custom styling
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="search"],
  textarea {
    color: var(--ds-text-primary);
  }
}
